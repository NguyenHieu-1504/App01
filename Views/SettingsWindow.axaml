<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="using:App01.Models" 
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
        x:Class="App01.Views.SettingsWindow"
        Title="Cấu Hình Hệ Thống"
        Width="900" Height="600"
        Background="#bcd7eb"
        x:CompileBindings="False"
        WindowStartupLocation="CenterScreen">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0">
            
            <TabItem Header="🔧 MongoDB">
                <ScrollViewer>
                    <StackPanel Spacing="15" Margin="20">
                        <TextBlock Text="CẤU HÌNH MONGODB" FontWeight="Bold" FontSize="18"/>
                        
                        <StackPanel Spacing="10">
                            <TextBlock Text="Connection String:"/>
                            <TextBox Name="txtMongoConnection" 
                                     Watermark="mongodb://username:password@host:port/database"
                                     Height="60"
                                     TextWrapping="Wrap"/>
                        </StackPanel>

                        <StackPanel Spacing="10">
                            <TextBlock Text="Database Name:"/>
                            <TextBox Name="txtDatabaseName" Watermark="event"/>
                        </StackPanel>

                        <StackPanel Spacing="10">
                            <TextBlock Text="Collection Name:"/>
                            <TextBox Name="txtCollectionName" Watermark="tblCardEventDay"/>
                        </StackPanel>

                        <Button Name="btnTestMongo" Content="🔌 Test Kết Nối" Width="150" HorizontalAlignment="Left" Click="BtnTestMongo_Click"/>
                        <TextBlock Name="txtMongoTestResult" Foreground="Gray" TextWrapping="Wrap"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="📍 Khu Vực">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="QUẢN LÝ KHU VỰC" FontWeight="Bold" FontSize="18" Margin="0,0,0,15"/>

                    <Border Grid.Row="1" BorderBrush="LightGray" BorderThickness="1" MinHeight="200">
                        <DataGrid Name="dgAreas"
                                  x:DataType="models:Area"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  SelectionMode="Single"
                                  GridLinesVisibility="All"
                                  CanUserResizeColumns="True"
                                  SelectionChanged="DgAreas_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Tên Khu Vực" Binding="{Binding Name}" Width="200"/>
                                <DataGridTextColumn Header="Sức Chứa" Binding="{Binding MaxCapacity}" Width="100"/>
                                <DataGridTextColumn Header="Polling (s)" Binding="{Binding RefreshIntervalSeconds}" Width="100"/>
                                <DataGridCheckBoxColumn Header="Active" Binding="{Binding IsActive}" Width="80"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                        <Button Name="btnAddArea" Content="➕ Thêm" Width="100" Click="BtnAddArea_Click"/>
                        <Button Name="btnEditArea" Content="✏️ Sửa" Width="100" IsEnabled="False" Click="BtnEditArea_Click"/>
                        <Button Name="btnDeleteArea" Content="🗑️ Xóa" Width="100" IsEnabled="False" Click="BtnDeleteArea_Click"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <TabItem Header="💡 Bảng LED">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="QUẢN LÝ BẢNG LED" FontWeight="Bold" FontSize="18" Margin="0,0,0,15"/>

                    <Border Grid.Row="1" BorderBrush="LightGray" BorderThickness="1" MinHeight="200">
                        <DataGrid Name="dgLedBoards"
                                  x:DataType="models:LedBoard"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  SelectionMode="Single"
                                  GridLinesVisibility="All"
                                  SelectionChanged="DgLedBoards_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Tên" Binding="{Binding Name}" Width="150"/>
                                <DataGridTextColumn Header="IP Address" Binding="{Binding IpAddress}" Width="150"/>
                                <DataGridTextColumn Header="Port" Binding="{Binding Port}" Width="80"/>
                                <DataGridTextColumn Header="Area ID" Binding="{Binding AreaId}" Width="80"/>
                                <DataGridCheckBoxColumn Header="Active" Binding="{Binding IsActive}" Width="80"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                        <Button Name="btnAddLed" Content="➕ Thêm" Width="100" Click="BtnAddLed_Click"/>
                        <Button Name="btnEditLed" Content="✏️ Sửa" Width="100" IsEnabled="False" Click="BtnEditLed_Click"/>
                        <Button Name="btnDeleteLed" Content="🗑️ Xóa" Width="100" IsEnabled="False" Click="BtnDeleteLed_Click"/>
                        <Button Name="btnTestLed" Content="🔌 Test" Width="100" IsEnabled="False" Click="BtnTestLed_Click"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <TabItem Header="🎨 Kịch Bản">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="QUẢN LÝ KỊCH BẢN HIỂN THỊ" FontWeight="Bold" FontSize="18" Margin="0,0,0,15"/>

                    <Border Grid.Row="1" BorderBrush="LightGray" BorderThickness="1" MinHeight="200">
                        <DataGrid Name="dgTemplates"
                                  x:DataType="models:DisplayTemplate"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  SelectionMode="Single"
                                  GridLinesVisibility="All"
                                  SelectionChanged="DgTemplates_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Tên" Binding="{Binding Name}" Width="150"/>
                                <DataGridTextColumn Header="Dòng 1" Binding="{Binding Line1Format}" Width="200"/>
                                <DataGridTextColumn Header="Dòng 2" Binding="{Binding Line2Format}" Width="200"/>
                                <DataGridTextColumn Header="Font Size" Binding="{Binding FontSize}" Width="80"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" Margin="0,15,0,0">
                        <Button Name="btnAddTemplate" Content="➕ Thêm" Width="100" Click="BtnAddTemplate_Click"/>
                        <Button Name="btnEditTemplate" Content="✏️ Sửa" Width="100" IsEnabled="False" Click="BtnEditTemplate_Click"/>
                        <Button Name="btnDeleteTemplate" Content="🗑️ Xóa" Width="100" IsEnabled="False" Click="BtnDeleteTemplate_Click"/>
                    </StackPanel>
                </Grid>
            </TabItem>

        </TabControl>

        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10" Margin="0,15,0,0">
            <Button Name="btnSave" Content="💾 Lưu Cấu Hình" Width="150" Click="BtnSave_Click"/>
            <Button Name="btnClose" Content="Đóng" Width="100" Click="BtnClose_Click"/>
        </StackPanel>

    </Grid>
</Window>